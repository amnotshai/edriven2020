<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>PA-03</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="center">
      <form
        action=""
        style="background-color: whitesmoke; width: 100%"
        class="center"
        id="the-form"
      >
        <input
          type="text"
          class="input-style"
          id="subtotal"
          name="subtotal"
          placeholder="Subtotal"
          style="text-align: right"
          oninput="EnableTxT()"
        />
        <label for="subtotal"> User input from 100 to 10,000</label><br />
        <br />
        <input
          type="text"
          class="input-style"
          id="tax"
          name="tax"
          placeholder="Tax"
          style="text-align: right"
          disabled
        />
        <label for="tax"> +12% Tax</label><br /><br />
        <input
          type="text"
          class="input-style"
          id="total"
          name="total"
          placeholder="Total"
          style="text-align: right"
          disabled
        />
        <label for="total"> Subtotal + Tax</label><br /><br />
        <input
          type="text"
          class="input-style"
          id="amt-paid"
          name="amt-paid"
          placeholder="Amount Paid"
          style="text-align: right"
          oninput="AmountPaid()"
          disabled
        />
        <label for="amt-paid"> Minimum is base on Subtotal+Tax</label
        ><br /><br />
        <input
          type="text"
          class="input-style"
          id="change"
          name="change"
          placeholder="Change"
          style="text-align: right"
          disabled="true"
        />
        <label for="change"> Amount Paid - Total</label><br /><br />
        <button id="btnpay" disabled>Pay</button>
      </form>
    </div>

    <script>
      function EnableTxT() {
        let userIn = document.getElementById("subtotal").value;
        let paidAmt = document.getElementById("amt-paid");
        let btnpay = document.getElementById("btnpay");

        let taxIn = document.getElementById("tax");
        let totalIn = document.getElementById("total");

        if (userIn >= 100 && userIn <= 10000) {
          paidAmt.removeAttribute("disabled");
          btnpay.style.backgroundColor = "green";
          btnpay.removeAttribute("disabled");

          let tax = parseInt(userIn) * 0.12;
          let total = parseInt(userIn) + tax;
          taxIn.value = tax;
          totalIn.value = total.toFixed(2);
          paidAmt.value = total.toFixed(2);
          AmountPaid();
        } else if (isNaN(userIn) || userIn < 100 || userIn > 10000) {
          paidAmt.setAttribute("disabled", true);
          paidAmt.value = "";
          taxIn.value = "";
          totalIn.value = "";
          btnpay.setAttribute("disabled", true);
          btnpay.style.backgroundColor = "darkred";
        }
      }

      function AmountPaid() {
        let changeIn = document.getElementById("change");
        let amt = document.getElementById("amt-paid").value;
        ttl = document.getElementById("total").value;
        let pay = document.getElementById("btnpay");

        if (amt != "" || amt != null) {
          let change = parseInt(amt) - parseInt(ttl);
          changeIn.value = change.toFixed(2);
          if (change < 0) {
            pay.setAttribute("disabled", true);
            pay.style.backgroundColor = "darkred";
          } else if (isNaN(change)) {
            changeIn.value = "";
          } else {
            pay.style.backgroundColor = "green";
            pay.removeAttribute("disabled");
          }
        } else {
          paidAmt.setAttribute("disabled", true);
          paidAmt.value = "";
          changeIn.value = "";
        }
      }
    </script>
  </body>
</html>
